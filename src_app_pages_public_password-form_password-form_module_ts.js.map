{"version":3,"file":"src_app_pages_public_password-form_password-form_module_ts.js","mappings":"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","sources":["./src/app/pages/public/password-form/password-form-routing.module.ts","./src/app/pages/public/password-form/password-form.module.ts","./src/app/pages/public/password-form/password-form.page.ts","./src/app/pages/public/password-form/password-form.page.scss"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PasswordFormPage } from './password-form.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PasswordFormPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PasswordFormPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PasswordFormPageRoutingModule } from './password-form-routing.module';\n\nimport { PasswordFormPage } from './password-form.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PasswordFormPageRoutingModule\n  ],\n  declarations: [PasswordFormPage]\n})\nexport class PasswordFormPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { LoadingController } from '@ionic/angular';\nimport { HttpClient } from '@angular/common/http';\nimport { ToastService } from 'src/app/services/toast/toast.service';\n\n@Component({\n  selector: 'app-password-reset-form',\n  templateUrl: './password-form.page.html',\n  styleUrls: ['./password-form.page.scss'],\n})\nexport class PasswordFormPage implements OnInit {\n  password: string = '';\n  confirmPassword: string = '';\n  submitAttempt: boolean = false;\n  currentYear: number = new Date().getFullYear();\n  token: string = '';\n\n  constructor(\n    private activatedRoute: ActivatedRoute,\n    private http: HttpClient,\n    private loadingController: LoadingController,\n    private toastService: ToastService,\n    private router: Router\n  ) {}\n\n  ngOnInit() {\n    this.token = this.activatedRoute.snapshot.queryParams['token'];\n    if (!this.token) {\n      this.router.navigate(['/signin']);\n    }\n  }\n\n  async resetPassword() {\n    this.submitAttempt = true;\n\n    if (this.password && this.confirmPassword && this.password === this.confirmPassword) {\n      const loading = await this.loadingController.create({\n        cssClass: 'default-loading',\n        message: '<p>Restableciendo contraseña...</p><span>Por favor, espere.</span>',\n        spinner: 'crescent'\n      });\n      await loading.present();\n\n      const data = { accion: 'nueva_contrasena', token: this.token, nueva_contrasena: this.password };\n\n      this.http.post<any>(\"http://localhost/ACE/WsMunicipioIonic/ws_gad.php\", data).subscribe(\n        async (response) => {\n          await loading.dismiss();\n          if (response.estado) {\n            await this.toastService.presentToast('Éxito', response.mensaje, 'top', 'success', 2000);\n            this.router.navigate(['/signin']);\n          } else {\n            await this.toastService.presentToast('Error', response.mensaje, 'top', 'danger', 2000);\n          }\n        },\n        async (error) => {\n          await loading.dismiss();\n          await this.toastService.presentToast('Error', 'Error al restablecer la contraseña.', 'top', 'danger', 2000);\n        }\n      );\n    } else {\n      await this.toastService.presentToast('Error', 'Por favor ingrese contraseñas válidas y asegúrese de que coincidan.', 'top', 'danger', 2000);\n    }\n  }\n}\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n"],"names":["NgModule","RouterModule","PasswordFormPage","routes","path","component","PasswordFormPageRoutingModule","imports","forChild","exports","CommonModule","FormsModule","IonicModule","PasswordFormPageModule","declarations","Component","ActivatedRoute","Router","LoadingController","HttpClient","ToastService","constructor","activatedRoute","http","loadingController","toastService","router","Date","getFullYear","ngOnInit","token","snapshot","queryParams","navigate","resetPassword","submitAttempt","password","confirmPassword","loading","create","cssClass","message","spinner","present","data","accion","nueva_contrasena","post","subscribe","response","__awaiter","dismiss","estado","presentToast","mensaje","error","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}