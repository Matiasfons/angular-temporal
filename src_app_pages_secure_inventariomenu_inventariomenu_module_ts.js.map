{"version":3,"file":"src_app_pages_secure_inventariomenu_inventariomenu_module_ts.js","mappings":"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","sources":["./src/app/pages/secure/inventariomenu/inventariomenu-routing.module.ts","./src/app/pages/secure/inventariomenu/inventariomenu.module.ts","./src/app/pages/secure/inventariomenu/inventariomenu.page.ts","./src/app/pages/secure/inventariomenu/inventariomenu.page.scss"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { InventariomenuPage } from './inventariomenu.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: InventariomenuPage,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class InventariomenuPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { InventariomenuPageRoutingModule } from './inventariomenu-routing.module';\n\nimport { InventariomenuPage } from './inventariomenu.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    InventariomenuPageRoutingModule,\n  ],\n  declarations: [InventariomenuPage],\n})\nexport class InventariomenuPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Router } from '@angular/router';\nimport { AlertController, ModalController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-inventariomenu',\n  templateUrl: './inventariomenu.page.html',\n  styleUrls: ['./inventariomenu.page.scss'],\n})\nexport class InventariomenuPage implements OnInit {\n  currentDate: string;\n  productos: any[] = [];\n  productInfoVisible: { [key: number]: boolean } = {};\n  idPersona: string;\n  selectedDate: string;\n  modalDate: string;\n  isDateModalOpen = false;\n\n  constructor(\n    private http: HttpClient,\n    private router: Router,\n    private alertController: AlertController,\n    private modalController: ModalController\n  ) {}\n\n  ngOnInit() {\n    this.idPersona = localStorage.getItem('CapacitorStorage.codigo');\n    console.log('ID Persona:', this.idPersona);\n    this.setCurrentDate();\n    this.selectedDate = this.currentDate;\n    this.loadProducts();\n  }\n\n  setCurrentDate() {\n    const today = new Date();\n    const offset = today.getTimezoneOffset(); // Obtener el desfase horario en minutos\n    const localDate = new Date(today.getTime() - offset * 60 * 1000); // Ajustar la fecha para la zona local\n    const formattedDate = localDate.toISOString().split('T')[0]; // Obtener la fecha en formato YYYY-MM-DD\n    this.currentDate = formattedDate;\n  }\n\n  loadProducts() {\n    if (!this.idPersona) {\n      console.error('ID de persona no disponible');\n      return;\n    }\n\n    this.http\n      .post<any>('http://localhost/ACE/WsMunicipioIonic/ws_gad.php', {\n        accion: 'cargar_productos2',\n        id_persona: this.idPersona,\n        fecha: this.selectedDate,\n      })\n      .subscribe(\n        (response) => {\n          if (response.estado) {\n            this.productos = response.datos;\n            this.productos.forEach((producto) => {\n              this.productInfoVisible[producto.id] = false;\n            });\n          } else {\n            console.error('Error al cargar productos:', response.mensaje);\n          }\n        },\n        (error) => {\n          console.error('Error en la solicitud:', error);\n        }\n      );\n  }\n\n  toggleProductInfo(producto: any) {\n    // Alternar visibilidad del producto seleccionado\n    this.productInfoVisible[producto.id] =\n      !this.productInfoVisible[producto.id];\n\n    // Cerrar la información de los otros productos\n    for (let id in this.productInfoVisible) {\n      if (id !== producto.id.toString()) {\n        this.productInfoVisible[id] = false;\n      }\n    }\n  }\n\n  editarProducto(riCodigo: string, rfCodigo: string) {\n    this.router.navigate([\n      '/editinventario',\n      { ri_codigo: riCodigo, rf_codigo: rfCodigo },\n    ]);\n  }\n\n  async eliminarProducto(riCodigo: string) {\n    const alert = await this.alertController.create({\n      header: 'Confirmar eliminación',\n      message: '¿Estás seguro de que deseas eliminar este producto?',\n      buttons: [\n        {\n          text: 'Cancelar',\n          role: 'cancel',\n          handler: () => {\n            console.log('Cancelado');\n          },\n        },\n        {\n          text: 'Eliminar',\n          handler: () => {\n            this.http\n              .post<any>('http://localhost/ACE/WsMunicipioIonic/ws_gad.php', {\n                accion: 'eliminar',\n                RI_CODIGO: riCodigo,\n              })\n              .subscribe(\n                (response) => {\n                  if (response.estado) {\n                    this.loadProducts(); // Recargar productos después de eliminar\n                  } else {\n                    console.error(\n                      'Error al eliminar producto:',\n                      response.mensaje\n                    );\n                  }\n                },\n                (error) => {\n                  console.error('Error en la solicitud:', error);\n                }\n              );\n          },\n        },\n      ],\n    });\n\n    await alert.present();\n  }\n\n  openDateModal() {\n    this.modalDate = this.selectedDate; // Inicializar el modal con la fecha seleccionada\n    this.isDateModalOpen = true;\n  }\n\n  async saveDate() {\n    this.isDateModalOpen = false;\n    this.selectedDate = this.modalDate;\n    this.loadProducts();\n  }\n\n  closeDateModal() {\n    this.isDateModalOpen = false;\n  }\n\n  onDateModalDismiss() {\n    this.closeDateModal();\n  }\n}\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"@charset \\\"UTF-8\\\";\\n.header {\\n  font-weight: bold;\\n  background-color: #000000; /* Negro para el encabezado */\\n  color: #ffffff; /* Blanco para el texto del encabezado */\\n}\\n\\n.data {\\n  padding: 8px;\\n  background-color: #e0e0e0; /* Gris claro para el fondo de los datos */\\n  color: #000000; /* Negro para el texto de los datos */\\n}\\n\\n.header-row ion-col,\\n.data-row ion-col {\\n  border: 1px solid #666666; /* Gris oscuro para el borde */\\n  border-width: 0 0 1px 0;\\n}\\n\\n.action-buttons {\\n  display: flex;\\n  justify-content: flex-start;\\n}\\n\\n.header-row {\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n}\\n\\n.col-label {\\n  flex: 1;\\n}\\n\\n.col-value {\\n  flex: 3;\\n  text-align: left;\\n}\\n\\n.transparent-grid {\\n  width: 100%;\\n}\\n\\n.pagination-controls {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  margin-top: 16px;\\n}\\n\\nion-button[color=danger] {\\n  --background: #ff4d4d; /* Rojo para el fondo del botón */\\n  --color: #ffffff; /* Blanco para el texto del botón */\\n}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/pages/secure/inventariomenu/inventariomenu.page.scss\"],\"names\":[],\"mappings\":\"AAAA,gBAAgB;AAAhB;EACE,iBAAA;EACA,yBAAA,EAAA,6BAAA;EACA,cAAA,EAAA,wCAAA;AAEF;;AACA;EACE,YAAA;EACA,yBAAA,EAAA,0CAAA;EACA,cAAA,EAAA,qCAAA;AAEF;;AACA;;EAEE,yBAAA,EAAA,8BAAA;EACA,uBAAA;AAEF;;AACA;EACE,aAAA;EACA,2BAAA;AAEF;;AACA;EACE,aAAA;EACA,mBAAA;EACA,mBAAA;AAEF;;AACA;EACE,OAAA;AAEF;;AACA;EACE,OAAA;EACA,gBAAA;AAEF;;AACA;EACE,WAAA;AAEF;;AACA;EACE,aAAA;EACA,uBAAA;EACA,mBAAA;EACA,gBAAA;AAEF;;AAAA;EACE,qBAAA,EAAA,iCAAA;EACA,gBAAA,EAAA,mCAAA;AAGF\",\"sourcesContent\":[\".header {\\n  font-weight: bold;\\n  background-color: #000000; /* Negro para el encabezado */\\n  color: #ffffff; /* Blanco para el texto del encabezado */\\n}\\n\\n.data {\\n  padding: 8px;\\n  background-color: #e0e0e0; /* Gris claro para el fondo de los datos */\\n  color: #000000; /* Negro para el texto de los datos */\\n}\\n\\n.header-row ion-col,\\n.data-row ion-col {\\n  border: 1px solid #666666; /* Gris oscuro para el borde */\\n  border-width: 0 0 1px 0;\\n}\\n\\n.action-buttons {\\n  display: flex;\\n  justify-content: flex-start;\\n}\\n\\n.header-row {\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n}\\n\\n.col-label {\\n  flex: 1;\\n}\\n\\n.col-value {\\n  flex: 3;\\n  text-align: left;\\n}\\n\\n.transparent-grid {\\n  width: 100%;\\n}\\n\\n.pagination-controls {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  margin-top: 16px;\\n}\\nion-button[color=\\\"danger\\\"] {\\n  --background: #ff4d4d; /* Rojo para el fondo del botón */\\n  --color: #ffffff; /* Blanco para el texto del botón */\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n"],"names":["NgModule","RouterModule","InventariomenuPage","routes","path","component","InventariomenuPageRoutingModule","imports","forChild","exports","CommonModule","FormsModule","IonicModule","InventariomenuPageModule","declarations","Component","HttpClient","Router","AlertController","ModalController","constructor","http","router","alertController","modalController","ngOnInit","idPersona","localStorage","getItem","console","log","setCurrentDate","selectedDate","currentDate","loadProducts","today","Date","offset","getTimezoneOffset","localDate","getTime","formattedDate","toISOString","split","error","post","accion","id_persona","fecha","subscribe","response","estado","productos","datos","forEach","producto","productInfoVisible","id","mensaje","toggleProductInfo","toString","editarProducto","riCodigo","rfCodigo","navigate","ri_codigo","rf_codigo","eliminarProducto","alert","create","header","message","buttons","text","role","handler","RI_CODIGO","present","openDateModal","modalDate","isDateModalOpen","saveDate","closeDateModal","onDateModalDismiss","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}