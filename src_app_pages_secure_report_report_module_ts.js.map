{"version":3,"file":"src_app_pages_secure_report_report_module_ts.js","mappings":"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","sources":["./src/app/pages/secure/report/report-routing.module.ts","./src/app/pages/secure/report/report.module.ts","./src/app/pages/secure/report/report.page.ts","./src/app/pages/secure/report/report.page.scss"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ReportPage } from './report.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ReportPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ReportPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ReportPageRoutingModule } from './report-routing.module';\n\nimport { ReportPage } from './report.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ReportPageRoutingModule\n  ],\n  declarations: [ReportPage]\n})\nexport class ReportPageModule {}\n","import { Component } from '@angular/core';\nimport { ReportService } from 'src/app/services/report/report.service';\nimport { Chart } from 'chart.js';\n\n@Component({\n  selector: 'app-report',\n  templateUrl: './report.page.html',\n  styleUrls: ['./report.page.scss'],\n})\nexport class ReportPage {\n  dateFrom: string;\n  dateTo: string;\n  reportType = 'daily_sales';\n  reportData: any = [];\n  exportFormat = '';\n\n  currentPage = 1;\n  totalPages = 1;\n  isAccordionOpen = true;\n  isShowChart = false;\n\n  constructor(private reportService: ReportService) {}\n\n  previousPage() {\n    if (this.currentPage > 1) {\n      this.currentPage--;\n      this.generateReport(this.currentPage);\n    }\n  }\n\n  nextPage() {\n    if (this.currentPage < this.totalPages) {\n      this.currentPage++;\n      this.generateReport(this.currentPage);\n    }\n  }\n\n  toggleAccordion() {\n    this.isAccordionOpen = !this.isAccordionOpen;\n  }\n\n  loadChart() {\n    const ctx = document.getElementById('barChart') as HTMLCanvasElement;\n\n    if (ctx) {\n      new Chart(ctx, {\n        type: 'bar',\n        data: {\n          labels: this.reportData.map((item) => item.nombre), // Ajusta según tus datos\n          datasets: [\n            {\n              label: 'Ganancias',\n              data: this.reportData.map((item) => item.RF_CANTIDAD_VENDIDA), // Ajusta según tus datos\n              backgroundColor: 'rgba(75, 192, 192, 0.2)',\n              borderColor: 'rgba(75, 192, 192, 1)',\n              borderWidth: 1,\n            },\n          ],\n        },\n        options: {\n          scales: {\n            y: {\n              beginAtZero: true,\n            },\n          },\n        },\n      });\n    }\n  }\n\n  generateReport(page?: number) {\n    const requestBody = {\n      accion: 'report',\n      id_persona: localStorage.getItem('CapacitorStorage.codigo'),\n      dateFrom: this.dateFrom,\n      dateTo: this.dateTo,\n      items_per_page: 10,\n      page: page || 1,\n    };\n\n    this.reportService.getDataReport(requestBody).subscribe((response: any) => {\n      if (response.estado) {\n        this.reportData = response.productos;\n\n        this.currentPage = response.pagination.current_page;\n        this.totalPages = response.pagination.total_pages;\n        this.isAccordionOpen = false;\n\n        setTimeout(() => {\n          this.loadChart();\n        }, 500);\n      } else {\n        console.error('Error al generar el reporte', response.mensaje);\n      }\n    });\n  }\n}","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n"],"names":["NgModule","RouterModule","ReportPage","routes","path","component","ReportPageRoutingModule","imports","forChild","exports","CommonModule","FormsModule","IonicModule","ReportPageModule","declarations","Component","ReportService","Chart","constructor","reportService","previousPage","currentPage","generateReport","nextPage","totalPages","toggleAccordion","isAccordionOpen","loadChart","ctx","document","getElementById","type","data","labels","reportData","map","item","nombre","datasets","label","RF_CANTIDAD_VENDIDA","backgroundColor","borderColor","borderWidth","options","scales","y","beginAtZero","page","requestBody","accion","id_persona","localStorage","getItem","dateFrom","dateTo","items_per_page","getDataReport","subscribe","response","estado","productos","pagination","current_page","total_pages","setTimeout","console","error","mensaje","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}